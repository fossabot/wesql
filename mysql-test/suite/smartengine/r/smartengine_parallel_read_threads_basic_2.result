SET @start_global_value = @@global.smartengine_parallel_read_threads;
SELECT @start_global_value;
@start_global_value
4
create table t1(id int primary key auto_increment, b text) ENGINE = SMARTENGINE;
set global smartengine_flush_memtable=1;
select count(*) from t1;
count(*)
1000
select count(*) from t1 where id > 0;
count(*)
1000
select table_name, subtable_name, subtable_id, sum(extent_count) > 0 from information_schema.SMARTENGINE_SUBTABLE where table_name='test.t1';
table_name	subtable_name	subtable_id	sum(extent_count) > 0
test.t1	PRIMARY	#	1
select count(*) from t1;
count(*)
1999
select count(*) from t1 where id > 0;
count(*)
1999
set smartengine_parallel_read_threads=2;
select count(*) from t1;
count(*)
1999
select count(*) from t1 where id > 0;
count(*)
1999
set smartengine_parallel_read_threads=8;
select count(*) from t1;
count(*)
1999
select count(*) from t1 where id > 0;
count(*)
1999
set global smartengine_flush_memtable=1;
select table_name, subtable_name, subtable_id, sum(extent_count) > 0 from information_schema.SMARTENGINE_SUBTABLE where table_name='test.t1';
table_name	subtable_name	subtable_id	sum(extent_count) > 0
test.t1	PRIMARY	#	1
select count(*) from t1;
count(*)
1999
select count(*) from t1 where id > 0;
count(*)
1999
set smartengine_parallel_read_threads=2;
select count(*) from t1;
count(*)
1999
select count(*) from t1 where id > 0;
count(*)
1999
set smartengine_parallel_read_threads=8;
select count(*) from t1;
count(*)
1999
select count(*) from t1 where id > 0;
count(*)
1999
SET @@global.smartengine_parallel_read_threads = @start_global_value;
SELECT @@global.smartengine_parallel_read_threads;
@@global.smartengine_parallel_read_threads
4
drop table t1;
