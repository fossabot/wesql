--source include/consensus_replication.inc

# bgc_before_flush_stage: uncommitted
# bgc_after_enrolling_for_flush_stage: uncommitted
# bgc_after_enrolling_for_sync_stage: uncommitted
# bgc_after_enrolling_for_commit_stage: uncommitted
# consensus_replication_after_sync: uncommitted
# consensus_replication_after_consensus_commit: commit
# bgc_after_enrolling_for_after_commit_stage: commit

--disable_warnings
--let $sync_point= bgc_after_sync_stage_before_commit_stage
--source include/leader_transfer_at_sync_point.inc

--let $sync_point= bgc_after_enrolling_for_flush_stage
--source include/leader_transfer_at_sync_point.inc

--let $sync_point= bgc_after_enrolling_for_sync_stage
--source include/leader_transfer_at_sync_point.inc

--let $sync_point= bgc_after_enrolling_for_commit_stage
--source include/leader_transfer_at_sync_point.inc

--let $sync_point= consensus_replication_after_sync
--source include/leader_transfer_at_sync_point.inc

--let $sync_point= consensus_replication_after_consensus_commit
--let $should_commit=1
--source include/leader_transfer_at_sync_point.inc

--let $sync_point= bgc_after_enrolling_for_after_commit_stage
--let $should_commit=1
--source include/leader_transfer_at_sync_point.inc

--connection default
--enable_warnings
