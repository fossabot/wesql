include/master-slave.inc
[connection master]
[connection slave]
set @restore_slave_net_timeout= @@global.slave_net_timeout;
Warnings:
Warning	1287	'@@slave_net_timeout' is deprecated and will be removed in a future release. Please use replica_net_timeout instead.
set @@global.slave_net_timeout= 10;
Warnings:
Warning	1287	'@@slave_net_timeout' is deprecated and will be removed in a future release. Please use replica_net_timeout instead.
SELECT LAST_HEARTBEAT_TIMESTAMP FROM performance_schema.replication_connection_status;
change master to master_host='127.0.0.1',master_port=MASTER_PORT, master_user='root';
Warnings:
Warning	####	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	####	'MASTER_HOST' is deprecated and will be removed in a future release. Please use SOURCE_HOST instead
Warning	####	'MASTER_PORT' is deprecated and will be removed in a future release. Please use SOURCE_PORT instead
Warning	####	'MASTER_USER' is deprecated and will be removed in a future release. Please use SOURCE_USER instead
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the connection metadata repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
SELECT HEARTBEAT_INTERVAL FROM performance_schema.replication_connection_configuration;
HEARTBEAT_INTERVAL	5.000
change master to master_host='127.0.0.1',master_port=MASTER_PORT, master_user='root', master_heartbeat_period= 4294968;
ERROR HY000: The requested value for the heartbeat period is either negative or exceeds the maximum allowed (4294967 seconds).
SELECT HEARTBEAT_INTERVAL FROM performance_schema.replication_connection_configuration;
HEARTBEAT_INTERVAL	5.000
[connection slave]
change master to master_host='127.0.0.1',master_port=MASTER_PORT, master_user='root', master_heartbeat_period= 0.0009999;
Warnings:
Warning	####	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	####	'MASTER_HOST' is deprecated and will be removed in a future release. Please use SOURCE_HOST instead
Warning	####	'MASTER_PORT' is deprecated and will be removed in a future release. Please use SOURCE_PORT instead
Warning	####	'MASTER_USER' is deprecated and will be removed in a future release. Please use SOURCE_USER instead
Warning	####	'MASTER_HEARTBEAT_PERIOD' is deprecated and will be removed in a future release. Please use SOURCE_HEARTBEAT_PERIOD instead
Warning	####	The requested value for the heartbeat period is less than 1 millisecond. The value is reset to 0, meaning that heartbeating will effectively be disabled.
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the connection metadata repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
SELECT HEARTBEAT_INTERVAL FROM performance_schema.replication_connection_configuration;
HEARTBEAT_INTERVAL	0.000
change master to master_host='127.0.0.1',master_port=MASTER_PORT, master_user='root', master_heartbeat_period= 4294967;
Warnings:
Warning	####	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	####	'MASTER_HOST' is deprecated and will be removed in a future release. Please use SOURCE_HOST instead
Warning	####	'MASTER_PORT' is deprecated and will be removed in a future release. Please use SOURCE_PORT instead
Warning	####	'MASTER_USER' is deprecated and will be removed in a future release. Please use SOURCE_USER instead
Warning	####	'MASTER_HEARTBEAT_PERIOD' is deprecated and will be removed in a future release. Please use SOURCE_HEARTBEAT_PERIOD instead
Warning	####	The requested value for the heartbeat period exceeds the value of `replica_net_timeout' seconds. A sensible value for the period should be less than the timeout.
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the connection metadata repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
SELECT HEARTBEAT_INTERVAL FROM performance_schema.replication_connection_configuration;
HEARTBEAT_INTERVAL	4294967.000
change master to master_host='127.0.0.1',master_port=MASTER_PORT, master_user='root', master_heartbeat_period= 0.001;
Warnings:
Warning	####	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	####	'MASTER_HOST' is deprecated and will be removed in a future release. Please use SOURCE_HOST instead
Warning	####	'MASTER_PORT' is deprecated and will be removed in a future release. Please use SOURCE_PORT instead
Warning	####	'MASTER_USER' is deprecated and will be removed in a future release. Please use SOURCE_USER instead
Warning	####	'MASTER_HEARTBEAT_PERIOD' is deprecated and will be removed in a future release. Please use SOURCE_HEARTBEAT_PERIOD instead
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the connection metadata repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
SELECT HEARTBEAT_INTERVAL FROM performance_schema.replication_connection_configuration;
HEARTBEAT_INTERVAL	0.001
reset slave;
Warnings:
Warning	1287	'RESET SLAVE' is deprecated and will be removed in a future release. Please use RESET REPLICA instead
set @@global.slave_net_timeout= 5;
Warnings:
Warning	1287	'@@slave_net_timeout' is deprecated and will be removed in a future release. Please use replica_net_timeout instead.
change master to master_host='127.0.0.1',master_port=MASTER_PORT, master_user='root', master_heartbeat_period= 5.001;
Warnings:
Warning	####	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	####	'MASTER_HOST' is deprecated and will be removed in a future release. Please use SOURCE_HOST instead
Warning	####	'MASTER_PORT' is deprecated and will be removed in a future release. Please use SOURCE_PORT instead
Warning	####	'MASTER_USER' is deprecated and will be removed in a future release. Please use SOURCE_USER instead
Warning	####	'MASTER_HEARTBEAT_PERIOD' is deprecated and will be removed in a future release. Please use SOURCE_HEARTBEAT_PERIOD instead
Warning	####	The requested value for the heartbeat period exceeds the value of `replica_net_timeout' seconds. A sensible value for the period should be less than the timeout.
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the connection metadata repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
SELECT HEARTBEAT_INTERVAL FROM performance_schema.replication_connection_configuration;
HEARTBEAT_INTERVAL	5.001
reset slave;
Warnings:
Warning	1287	'RESET SLAVE' is deprecated and will be removed in a future release. Please use RESET REPLICA instead
set @@global.slave_net_timeout= 5;
Warnings:
Warning	1287	'@@slave_net_timeout' is deprecated and will be removed in a future release. Please use replica_net_timeout instead.
Warning	1704	The requested value for the heartbeat period exceeds the value of `replica_net_timeout' seconds. A sensible value for the period should be less than the timeout.
change master to master_host='127.0.0.1',master_port=MASTER_PORT, master_user='root', master_heartbeat_period= 4;
Warnings:
Warning	####	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	####	'MASTER_HOST' is deprecated and will be removed in a future release. Please use SOURCE_HOST instead
Warning	####	'MASTER_PORT' is deprecated and will be removed in a future release. Please use SOURCE_PORT instead
Warning	####	'MASTER_USER' is deprecated and will be removed in a future release. Please use SOURCE_USER instead
Warning	####	'MASTER_HEARTBEAT_PERIOD' is deprecated and will be removed in a future release. Please use SOURCE_HEARTBEAT_PERIOD instead
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the connection metadata repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
SELECT HEARTBEAT_INTERVAL FROM performance_schema.replication_connection_configuration;
HEARTBEAT_INTERVAL	4.000
set @@global.slave_net_timeout= 3 /* must be a warning */;
Warnings:
Warning	1287	'@@slave_net_timeout' is deprecated and will be removed in a future release. Please use replica_net_timeout instead.
Warning	1704	The requested value for the heartbeat period exceeds the value of `replica_net_timeout' seconds. A sensible value for the period should be less than the timeout.
reset slave;
Warnings:
Warning	1287	'RESET SLAVE' is deprecated and will be removed in a future release. Please use RESET REPLICA instead
[connection master]
drop table if exists t1;
[connection slave]
set @@global.slave_net_timeout= 10;
Warnings:
Warning	1287	'@@slave_net_timeout' is deprecated and will be removed in a future release. Please use replica_net_timeout instead.
change master to master_host='127.0.0.1',master_port=MASTER_PORT, master_user='root', master_heartbeat_period= 0.5;
Warnings:
Warning	####	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	####	'MASTER_HOST' is deprecated and will be removed in a future release. Please use SOURCE_HOST instead
Warning	####	'MASTER_PORT' is deprecated and will be removed in a future release. Please use SOURCE_PORT instead
Warning	####	'MASTER_USER' is deprecated and will be removed in a future release. Please use SOURCE_USER instead
Warning	####	'MASTER_HEARTBEAT_PERIOD' is deprecated and will be removed in a future release. Please use SOURCE_HEARTBEAT_PERIOD instead
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the connection metadata repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
SELECT HEARTBEAT_INTERVAL FROM performance_schema.replication_connection_configuration;
HEARTBEAT_INTERVAL	0.500
start slave;
Warnings:
Warning	1287	'START SLAVE' is deprecated and will be removed in a future release. Please use START REPLICA instead
[connection master]
create table t1 (f1 int);
include/sync_slave_sql_with_master.inc
include/check_slave_param.inc [Relay_Log_File]
SELECT HEARTBEAT_INTERVAL FROM performance_schema.replication_connection_configuration;
HEARTBEAT_INTERVAL	0.500
A heartbeat has been received by the slave
include/assert.inc [last_heartbeat_timestamp should not be empty]
[connection master]
drop table t1;
include/sync_slave_sql_with_master.inc
set @@global.slave_net_timeout= @restore_slave_net_timeout;
Warnings:
Warning	1287	'@@slave_net_timeout' is deprecated and will be removed in a future release. Please use replica_net_timeout instead.
[connection slave]
include/stop_slave.inc
CHANGE MASTER TO MASTER_HEARTBEAT_PERIOD= 10;
Warnings:
Warning	1287	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	1287	'MASTER_HEARTBEAT_PERIOD' is deprecated and will be removed in a future release. Please use SOURCE_HEARTBEAT_PERIOD instead
include/assert.inc [HEARTBEAT_INTERVAL should be 10.000]

# Verify that heartbeat period is not reset to default implicitly and
# received_heartbeat is not set to 0 by this.

CHANGE MASTER TO MASTER_RETRY_COUNT= 3;
Warnings:
Warning	1287	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	1287	'MASTER_RETRY_COUNT' is deprecated and will be removed in a future release. Please use SOURCE_RETRY_COUNT instead
include/assert.inc [HEARTBEAT_INTERVAL should be 10.000]
include/assert.inc [COUNT_RECEIVED_HEARTBEATS should NOT be set to 0]
include/stop_slave.inc
Warnings:
Note	3084	Replication thread(s) for channel '' are already stopped.
RESET SLAVE;
Warnings:
Warning	1287	'RESET SLAVE' is deprecated and will be removed in a future release. Please use RESET REPLICA instead
RESET MASTER;
CHANGE MASTER TO MASTER_AUTO_POSITION;
Warnings:
Warning	1287	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	1287	'MASTER_AUTO_POSITION' is deprecated and will be removed in a future release. Please use SOURCE_AUTO_POSITION instead
include/start_slave.inc
include/assert.inc [HEARTBEAT_INTERVAL should still be 10.000 after RESET SLAVE.]
include/stop_slave_io.inc
CHANGE MASTER TO MASTER_HOST= 'localhost', MASTER_PORT= MASTER_PORT;
Warnings:
Warning	1287	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	1287	'MASTER_HOST' is deprecated and will be removed in a future release. Please use SOURCE_HOST instead
Warning	1287	'MASTER_PORT' is deprecated and will be removed in a future release. Please use SOURCE_PORT instead
include/start_slave.inc
include/assert.inc [HEARTBEAT_INTERVAL should reset to default.]
#
# Change from default to make sure changing HOST resets heartbeat_interval
# to default.
#
include/stop_slave_io.inc
CHANGE MASTER TO MASTER_HEARTBEAT_PERIOD = 10;
Warnings:
Warning	1287	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	1287	'MASTER_HEARTBEAT_PERIOD' is deprecated and will be removed in a future release. Please use SOURCE_HEARTBEAT_PERIOD instead
include/start_slave.inc
DROP TABLE IF EXISTS t1;
include/sync_slave_sql_with_master.inc
include/stop_slave.inc
CHANGE MASTER TO MASTER_HOST= '127.0.0.1';
Warnings:
Warning	1287	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	1287	'MASTER_HOST' is deprecated and will be removed in a future release. Please use SOURCE_HOST instead
include/start_slave.inc
include/assert.inc [heartbeat_interval should reset to default on changing host.]
DROP TABLE IF EXISTS t1;
include/sync_slave_sql_with_master.inc
#
# Change from default to make sure changing PORT resets heartbeat_interval
# to default.
#
include/stop_slave.inc
CHANGE MASTER TO MASTER_HEARTBEAT_PERIOD = 10;
Warnings:
Warning	1287	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	1287	'MASTER_HEARTBEAT_PERIOD' is deprecated and will be removed in a future release. Please use SOURCE_HEARTBEAT_PERIOD instead
include/start_slave.inc
DROP TABLE IF EXISTS t1;
include/sync_slave_sql_with_master.inc
include/stop_slave.inc
CHANGE MASTER TO MASTER_PORT= MASTER_PORT;
Warnings:
Warning	1287	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	1287	'MASTER_PORT' is deprecated and will be removed in a future release. Please use SOURCE_PORT instead
include/start_slave.inc
include/assert.inc [heartbeat_interval should reset to default on changing port.]
DROP TABLE IF EXISTS t1;
include/sync_slave_sql_with_master.inc
#
# Change from default to make sure changing HOST and PORT resets
# heartbeat_period to default.
#
include/stop_slave.inc
CHANGE MASTER TO MASTER_HOST= '127.0.0.1', MASTER_PORT= MASTER_PORT;
Warnings:
Warning	1287	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	1287	'MASTER_HOST' is deprecated and will be removed in a future release. Please use SOURCE_HOST instead
Warning	1287	'MASTER_PORT' is deprecated and will be removed in a future release. Please use SOURCE_PORT instead
include/start_slave.inc
include/assert.inc [heartbeat_interval should reset to default on changing host and port.]
DROP TABLE IF EXISTS t1;
include/sync_slave_sql_with_master.inc
include/stop_slave.inc
RESET SLAVE ALL;
Warnings:
Warning	1287	'RESET SLAVE' is deprecated and will be removed in a future release. Please use RESET REPLICA instead
include/assert.inc [heartbeat_interval should reset to zero by RESET SLAVE ALL.]
change master to master_host= '127.0.0.1', master_port= MASTER_PORT, master_user= 'root';
Warnings:
Warning	####	'CHANGE MASTER' is deprecated and will be removed in a future release. Please use CHANGE REPLICATION SOURCE instead
Warning	####	'MASTER_HOST' is deprecated and will be removed in a future release. Please use SOURCE_HOST instead
Warning	####	'MASTER_PORT' is deprecated and will be removed in a future release. Please use SOURCE_PORT instead
Warning	####	'MASTER_USER' is deprecated and will be removed in a future release. Please use SOURCE_USER instead
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the connection metadata repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
include/start_slave.inc
DROP TABLE IF EXISTS t1;
include/sync_slave_sql_with_master.inc
include/rpl_end.inc
