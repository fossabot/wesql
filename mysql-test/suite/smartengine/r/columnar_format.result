DROP TABLE IF EXISTS t1;
DROP TABLE IF EXISTS t2;
CREATE TABLE t1 (
c1 int primary key,
c2 char(100),
c3 varchar(256),
c4 blob
) ENGINE=SMARTENGINE;
CREATE TABLE t2 (
c1 int primary key,
c2 char(100),
c3 varchar(256),
c4 blob
) ENGINE=SMARTENGINE, ENGINE_ATTRIBUTE='{"data_format":"columnar", "block_size":8192}';
SELECT COUNT(*) FROM t1;
COUNT(*)
9999
SELECT COUNT(*) FROM t2;
COUNT(*)
9999
SET GLOBAL smartengine_force_flush_memtable_now=ON;
SELECT COUNT(*) FROM t1;
COUNT(*)
9999
SELECT COUNT(*) FROM t2;
COUNT(*)
9999
SELECT COUNT(*) FROM t1 WHERE c2 = "zds";
COUNT(*)
9999
SELECT COUNT(*) FROM t2 WHERE c2 = "zds";
COUNT(*)
9999
SELECT COUNT(*) FROM t1 WHERE c3 = "ppl";
COUNT(*)
9999
SELECT COUNT(*) FROM t2 WHERE c3 = "ppl";
COUNT(*)
9999
SELECT COUNT(*) FROM t1 WHERE c4 = "summer";
COUNT(*)
9999
SELECT COUNT(*) FROM t2 WHERE c4 = "summer";
COUNT(*)
9999
ALTER TABLE t1 add column c5 int default 100 , algorithm=instant;
ALTER TABLE t2 add column c5 int default 100 , algorithm=instant;
INSERT INTO t1 values (10000, "zds", "ppl", "summer", 1234);
INSERT INTO t2 values (10000, "zds", "ppl", "summer", 1234);
SET GLOBAL smartengine_force_flush_memtable_now=ON;
SELECT COUNT(*) FROM t1 WHERE c5 = 100;
COUNT(*)
9999
SELECT COUNT(*) FROM t1 WHERE c5 = 100;
COUNT(*)
9999
SELECT * FROM t1 WHERE c5 = 1234;
c1	c2	c3	c4	c5
10000	zds	ppl	summer	1234
SELECT * FROM t2 WHERE c5 = 1234;
c1	c2	c3	c4	c5
10000	zds	ppl	summer	1234
DROP TABLE t1;
DROP TABLE t2;
