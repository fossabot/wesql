CREATE DATABASE db1;
CREATE TABLE t1(c1 int) ENGINE=SMARTENGINE ;
INSERT INTO t1 values(1);
INSERT INTO t1 values(2);
INSERT INTO t1 values(3);
INSERT INTO t1 values(4);
SELECT * FROM t1;
c1
1
2
3
4
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `c1` int DEFAULT NULL
) ENGINE=SMARTENGINE DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci
# Wait for at least 1 snapshots to be generated 
#
# Check for contain innodb_archive consistent_snapshot.index
Pattern found.
# Check for contain se_archive consistent_snapshot.index
Pattern found.
# Select mysql innodb persistent views
include/assert.inc [1st mysql innodb archive file should be innodb_archive_000001.]
include/assert.inc [mysql pesistent innodb archive file exist.]
# Select smartengine persistent views
include/assert.inc [1st smartengine archive file should be se_archive_000001.]
include/assert.inc [smartengine pesistent archive file exist.]
include/assert.inc [smartengine backup exist.]
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
INSERT INTO t1 SELECT * FROM t1;
# Wait for at least 4 snapshots to be generated 
# Purge persistent snapshot to timestamp
include/assert.inc [Purge consistent snapshot.]
include/assert.inc [Check results after purge.]
# Purge all persistent snapshot
include/assert.inc [Purge consistent snapshot.]
include/assert.inc [Keep the last consistent snapshot.]
# Cleanup
DROP TABLE t1;
DROP DATABASE db1;
